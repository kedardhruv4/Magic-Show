(this["webpackJsonpott-app"]=this["webpackJsonpott-app"]||[]).push([[16],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return p}));var r=n(24),a=n(17),i=n.n(a),c=n(113),s=n(34),o=n(111),l=n(18),d=function(e){return Object(r.a)(i.a.mark((function t(){var n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)(null===o.a||void 0===o.a?void 0:o.a.contentAdd,e,"postMultipart");case 2:if(200!==(null===(r=t.sent)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.status)){t.next=7;break}return t.abrupt("return",r);case 7:return s.b.error(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))},u=function(e,t,n){return Object(r.a)(i.a.mark((function r(){var a,l,d;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(c.a)("".concat(null===o.a||void 0===o.a?void 0:o.a.contentGet,"?type=").concat(e,"&page=").concat(t,"&limit=").concat(n),{},"get");case 2:if(200!==(null===(l=r.sent)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.status)){r.next=7;break}return r.abrupt("return",l);case 7:return s.b.error(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message),r.abrupt("return",l);case 9:case"end":return r.stop()}}),r)})))},v=function(e){return Object(r.a)(i.a.mark((function t(){var n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)("".concat(null===o.a||void 0===o.a?void 0:o.a.contentGetById,"?id=").concat(e),{},"get");case 2:if(200!==(null===(r=t.sent)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.status)){t.next=7;break}return t.abrupt("return",r);case 7:return s.b.error(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))},b=function(e,t){return Object(r.a)(i.a.mark((function n(){var r,a,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(c.a)("".concat(null===o.a||void 0===o.a?void 0:o.a.contentUpdate,"?id=").concat(e),t,"put");case 2:if(200!==(null===(a=n.sent)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.status)){n.next=7;break}return n.abrupt("return",a);case 7:return s.b.error(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message),n.abrupt("return",a);case 9:case"end":return n.stop()}}),n)})))},j=function(e){return Object(r.a)(i.a.mark((function t(){var n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)("".concat(null===o.a||void 0===o.a?void 0:o.a.contentDelete,"?id=").concat(e),{},"delete");case 2:if(200!==(null===(r=t.sent)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.status)){t.next=7;break}return t.abrupt("return",r);case 7:return s.b.error(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(){var u=Object(r.a)(i.a.mark((function r(u){var v,b,j,m;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(c.a)("".concat(null===o.a||void 0===o.a?void 0:o.a.subscription,"?isPaid=").concat(e,"&cardInput=").concat(t,"&cardName=").concat(n,"&cvv=").concat(a,"&expDate=").concat(d),{},"put");case 2:if(200!==(null===(b=r.sent)||void 0===b||null===(v=b.data)||void 0===v?void 0:v.status)){r.next=9;break}return u({type:l.c,payload:[null===b||void 0===b||null===(j=b.data)||void 0===j?void 0:j.data]}),s.b.success("You have successfully upgraded your plan"),r.abrupt("return",b);case 9:return s.b.error(null===b||void 0===b||null===(m=b.data)||void 0===m?void 0:m.message),r.abrupt("return",b);case 11:case"end":return r.stop()}}),r)})));return function(e){return u.apply(this,arguments)}}()},p=function(e){return Object(r.a)(i.a.mark((function t(){var n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)(null===o.a||void 0===o.a?void 0:o.a.coverImageUpload,e,"postMultipart");case 2:if(200!==(null===(r=t.sent)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.status)){t.next=7;break}return t.abrupt("return",r);case 7:return s.b.error(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))}},109:function(e,t,n){"use strict";n(1);var r=n(104),a=n(23),i=n(4);t.a=function(e){var t=e.control,n=e.name,c=e.label,s=e.type,o=e.id,l=e.placeholder,d=e.autoFocus,u=e.className,v=e.error;return Object(i.jsxs)(i.Fragment,{children:[c&&Object(i.jsx)(a.s,{className:"form-label",for:o,children:c},n+1),Object(i.jsx)(r.a,{control:t,name:n,render:function(e){var t=e.field,r=t.onChange,c=t.onBlur,b=t.value;return Object(i.jsx)(a.p,{type:s,onChange:r,onBlur:c,name:n,value:b,id:o,placeholder:l,autoFocus:d,className:u,invalid:Boolean(v)},n+3)}},n+2),v&&Object(i.jsx)(a.o,{children:v})]})}},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l}));var r=n(122),a=n(112);n.n(a)()(r);var i=r.object({email:r.string().email().required(),password:r.string().min(8).max(16).minLowercase(1).minUppercase(1).minNumbers(1).minSymbols(1).required()}),c=r.object({username:r.string().required(),email:r.string().email().required(),password:r.string().min(8).max(16).minLowercase(1).minUppercase(1).minNumbers(1).minSymbols(1).required(),terms:r.bool().oneOf([!0],"Please accept  privacy policy & terms").required()}),s=r.object({email:r.string().email().required()}),o=r.object({file:r.array().test("isFile","Please select file",(function(e){return e&&e[0]})).required(),title:r.string().required(),description:r.string().required(),isFree:r.string().required()}),l=r.object({title:r.string().required(),description:r.string().required(),isFree:r.string().required()});r.object({file:r.string().required(),title:r.string().required(),description:r.string().required(),isFree:r.string().required(),cover:r.string()})},117:function(e,t,n){"use strict";n(1);var r=n(104),a=n(23),i=n(143),c=n(120),s=n(4);t.a=function(e){var t=e.control,n=e.name,o=e.label,l=e.id,d=e.placeholder,u=e.className,v=e.error,b=e.options;return Object(s.jsxs)(s.Fragment,{children:[o&&Object(s.jsx)(a.s,{className:"form-label",for:l,children:o},n+1),Object(s.jsx)(r.a,{control:t,name:n,render:function(e){var t=e.field,r=t.onChange,a=t.value;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(i.a,{theme:c.d,value:null===b||void 0===b?void 0:b.filter((function(e){return e.value===a})),onChange:function(e){return r(null===e||void 0===e?void 0:e.value)},name:n,id:l,placeholder:d,className:u,classNamePrefix:"select",defaultValue:null===b||void 0===b?void 0:b[0],options:b,isClearable:!1,invalid:Boolean(v)})})}},n+2),v&&Object(s.jsx)(a.o,{children:v})]})}},118:function(e,t,n){"use strict";n(1);var r=n(104),a=n(23),i=n(4);t.a=function(e){var t=e.control,n=e.name,c=e.label,s=e.id,o=e.className,l=e.error,d=e.accept;return Object(i.jsxs)(i.Fragment,{children:[c&&Object(i.jsx)(a.s,{className:"form-label",for:s,children:c},n+1),Object(i.jsx)(r.a,{control:t,name:n,render:function(e){var t=e.field.onChange;return Object(i.jsx)("input",{type:"file",accept:d,onChange:function(e){return t([e.currentTarget.files[0]])},name:n,id:s,className:o},n+3)}},n+2),l&&Object(i.jsx)(a.o,{children:l})]})}},197:function(e,t,n){"use strict";n.r(t);var r=n(12),a=n(24),i=n(7),c=n(17),s=n.n(c),o=n(116),l=n(1),d=n(104),u=n(34),v=n(32),b=n(3),j=n(23),m=n(114),p=n(196),f=n(346),O=n(327),h=n(347),x=n(4),g=function(e){var t=e.onChange,n=e.multiple,a=e.accept,c=Object(l.useState)([]),s=Object(i.a)(c,2),o=s[0],d=s[1],u=Object(p.a)({multiple:n,accept:a,onDrop:function(e){d([].concat(Object(m.a)(o),Object(m.a)(e.map((function(e){return Object.assign(e)}))))),t([].concat(Object(m.a)(o),Object(m.a)(e.map((function(e){return Object.assign(e)})))))}}),v=u.getRootProps,b=u.getInputProps,g=function(e){return e.type.startsWith("image")?Object(x.jsx)("img",{className:"rounded",alt:e.name,src:URL.createObjectURL(e),height:"28",width:"28"}):Object(x.jsx)(f.a,{size:"28"})},N=o.map((function(e,n){return Object(x.jsxs)(j.u,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsxs)("div",{className:"file-details d-flex align-items-center",children:[Object(x.jsx)("div",{className:"file-preview me-1",children:g(e)}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"file-name mb-0",children:e.name}),Object(x.jsx)("p",{className:"file-size mb-0",children:(r=e.size,Math.round(r/100)/10>1e3?"".concat((Math.round(r/100)/1e4).toFixed(1)," mb"):"".concat((Math.round(r/100)/10).toFixed(1)," kb"))})]})]}),Object(x.jsx)(j.b,{color:"danger",outline:!0,size:"sm",className:"btn-icon",onClick:function(){return function(e){var n=o.filter((function(t){return t.name!==e.name}));d(Object(m.a)(n)),t(Object(m.a)(n))}(e)},children:Object(x.jsx)(O.a,{size:14})})]},"".concat(e.name,"-").concat(n));var r}));return Object(x.jsx)(j.c,{children:Object(x.jsx)(j.d,{children:o.length?Object(x.jsx)(l.Fragment,{children:Object(x.jsx)(j.t,{className:"my-2",children:N})}):Object(x.jsxs)("div",Object(r.a)(Object(r.a)({},v({className:"dropzone"})),{},{children:[Object(x.jsx)("input",Object(r.a)({},b())),Object(x.jsxs)("div",{className:"d-flex align-items-center justify-content-center flex-column",children:[Object(x.jsx)(h.a,{size:64}),Object(x.jsx)("h5",{children:"Drop Files here or click to upload"}),Object(x.jsxs)("p",{className:"text-secondary",children:["Drop files here or click"," ",Object(x.jsx)("a",{href:"/",onClick:function(e){return e.preventDefault()},children:"browse"})," ","thorough your machine"]})]})]}))})})},N=function(e){var t=e.control,n=e.name,r=e.label,a=e.id,i=e.placeholder,c=e.className,s=e.error,o=e.accept;return Object(x.jsxs)(x.Fragment,{children:[r&&Object(x.jsx)(j.s,{className:"form-label",for:a,children:r},n+1),Object(x.jsx)(d.a,{control:t,name:n,render:function(e){var t=e.field.onChange;return Object(x.jsx)(g,{accept:o,onChange:function(e){t(e)},name:n,id:a,placeholder:i,className:c,invalid:Boolean(s),multiple:!1},n+3)}},n+2),s&&Object(x.jsx)("span",{className:"text-danger",children:s})]})},y=n(117),F=n(118),w=n(109),k=n(18),C=n(110),q=n(105);t.default=function(){var e,t,n,c,m,p=Object(l.useState)(!1),f=Object(i.a)(p,2),O=f[0],h=f[1],g=Object(l.useState)(!1),M=Object(i.a)(g,2),D=M[0],S=M[1],z=Object(v.b)(),U=Object(b.g)(),A=Object(b.f)(),B=Object(d.e)({mode:"onChange",defaultValues:{file:[],title:"",description:"",isFree:"true",cover:[]},resolver:Object(o.a)(null!==U&&void 0!==U&&U.id?C.b:C.c)}),P=B.handleSubmit,I=B.control,L=B.reset,R=B.formState.errors,E=function(){var e=Object(a.a)(s.a.mark((function e(t){var n,r,a,i,c,o,l,d,v,b,j,m,p,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),(r=new FormData).append("files",null===t||void 0===t||null===(n=t.file)||void 0===n?void 0:n[0]),r.append("isFree",null===t||void 0===t?void 0:t.isFree),r.append("title",null===t||void 0===t?void 0:t.title),r.append("description",null===t||void 0===t?void 0:t.description),r.append("type","movies"),!O){e.next=15;break}return i={title:null===t||void 0===t?void 0:t.title,description:null===t||void 0===t?void 0:t.description,isFree:null===t||void 0===t?void 0:t.isFree},e.next=11,z(Object(q.e)(null===U||void 0===U?void 0:U.id,i));case 11:200===(null===(c=e.sent)||void 0===c||null===(a=c.data)||void 0===a?void 0:a.status)&&(u.b.success("Movie Updated successfully"),A("/movies")),e.next=29;break;case 15:return e.next=17,z(Object(q.a)(r));case 17:if(200!==(null===(l=e.sent)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.status)){e.next=29;break}if(null===t||void 0===t||null===(d=t.cover)||void 0===d||!d[0]){e.next=27;break}return(p=new FormData).append("id",null===l||void 0===l||null===(v=l.data)||void 0===v||null===(b=v.data)||void 0===b?void 0:b._id),p.append("files",null===t||void 0===t||null===(j=t.cover)||void 0===j?void 0:j[0]),e.next=25,z(Object(q.f)(p));case 25:200===(null===(f=e.sent)||void 0===f||null===(m=f.data)||void 0===m?void 0:m.status)&&(u.b.success("Movie added successfully"),A("/movies"));case 27:u.b.success("Movie added successfully"),A("/movies");case 29:S(!1);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(a.a)(s.a.mark((function e(t){var n,a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(Object(q.d)(t));case 2:200===(null===(a=e.sent)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.status)&&L(Object(r.a)({},null===a||void 0===a||null===(i=a.data)||void 0===i||null===(c=i.data)||void 0===c?void 0:c[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){null!==U&&void 0!==U&&U.id&&(h(!0),G(null===U||void 0===U?void 0:U.id))}),[null===U||void 0===U?void 0:U.id]),Object(x.jsxs)(j.c,{children:[Object(x.jsx)(j.e,{children:Object(x.jsx)(j.h,{tag:"h4",children:null!==U&&void 0!==U&&U.id?"Edit Movie":"Add Movie"})}),Object(x.jsx)(j.d,{children:Object(x.jsxs)(j.n,{onSubmit:P(E),children:[null!==U&&void 0!==U&&U.id?null:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(j.C,{className:"mb-1",children:[Object(x.jsx)(j.s,{sm:"3",for:"inputFile",children:"Cover Image"}),Object(x.jsx)(j.i,{sm:"9",children:Object(x.jsx)(F.a,{control:I,name:"cover",label:"",type:"file",id:"song-file",placeholder:"Add file here",autoFocus:!1,accept:"image/*",className:"",error:null===R||void 0===R||null===(e=R.file)||void 0===e?void 0:e.message})})]}),Object(x.jsxs)(j.C,{className:"mb-1",children:[Object(x.jsx)(j.s,{sm:"3",for:"inputFile",children:"File"}),Object(x.jsx)(j.i,{sm:"9",children:Object(x.jsx)(N,{control:I,name:"file",label:"",accept:"video/mp4",id:"movie-file",placeholder:"Add file here",className:"",error:null===R||void 0===R||null===(t=R.file)||void 0===t?void 0:t.message})})]})]}),Object(x.jsxs)(j.C,{className:"mb-1",children:[Object(x.jsx)(j.s,{sm:"3",for:"movie-description",children:"Title"}),Object(x.jsx)(j.i,{sm:"9",children:Object(x.jsx)(w.a,{control:I,name:"title",label:"",type:"text",id:"movie-title",placeholder:"Add title here",autoFocus:!0,className:"",error:null===R||void 0===R||null===(n=R.title)||void 0===n?void 0:n.message})})]}),Object(x.jsxs)(j.C,{className:"mb-1",children:[Object(x.jsx)(j.s,{sm:"3",for:"movie-description",children:"Description"}),Object(x.jsx)(j.i,{sm:"9",children:Object(x.jsx)(w.a,{control:I,name:"description",label:"",type:"description",id:"movie-description",placeholder:"Add description here",autoFocus:!1,className:"",error:null===R||void 0===R||null===(c=R.description)||void 0===c?void 0:c.message})})]}),Object(x.jsxs)(j.C,{className:"mb-1",children:[Object(x.jsx)(j.s,{sm:"3",for:"movie-description",children:"Movie type"}),Object(x.jsx)(j.i,{sm:"9",children:Object(x.jsx)(y.a,{control:I,name:"isFree",label:"",id:"movie-isFree",placeholder:"Select type",autoFocus:!0,className:"react-select",options:k.d,error:null===R||void 0===R||null===(m=R.isFree)||void 0===m?void 0:m.message})})]}),Object(x.jsx)(j.C,{children:Object(x.jsxs)(j.i,{className:"d-flex",md:{size:9,offset:3},children:[Object(x.jsxs)(j.b,{className:"me-1",color:"primary",type:"submit",disabled:D,children:["Submit",D?Object(x.jsxs)(x.Fragment,{children:["\xa0",Object(x.jsx)(j.D,{color:"light",size:"sm"})]}):null]}),null!==U&&void 0!==U&&U.id?null:Object(x.jsx)(j.b,{outline:!0,color:"secondary",type:"reset",disabled:D,children:"Reset"})]})})]})})]})}}}]);
//# sourceMappingURL=16.836ff94b.chunk.js.map